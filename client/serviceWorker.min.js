const cachePrefix="resto-revs",cacheVersion="v0001",cacheName="resto-revs-v0001";self.addEventListener("install",e=>{e.waitUntil(caches.open(cacheName).then(function(e){let t=["index.html","restaurant.html","unavailable.html","img/restaurant-128.png","img/restaurant-256.png","img/restaurant.png","css/styles.css","css/styles.min.css","js/idb.js","js/idb.min.js","js/urlhelper.js","js/urlhelper.min.js","js/dbhelper.js","js/dbhelper.min.js","js/main.js","js/main.min.js","js/restaurant_info.js","js/restaurant_info.min.js"];const s=["","-200","-300","-400","-500","-600"];for(let e=1;e<=10;e++)s.forEach(s=>t.push(`img/${e}${s}.jpg`));return e.addAll(t).then(()=>self.skipWaiting())}).catch(e=>console.error(e)))}),self.addEventListener("activate",e=>{}),self.addEventListener("fetch",e=>{const t=new Promise((t,s)=>{caches.open(cacheName).then(a=>{let n=e.request.url;a.match(n).then(r=>{if(r)return t(r);fetch(e.request).then(e=>(a.put(n,e.clone()),t(e))).catch(n=>{if(!e.request.url.includes("restaurant.html?id="))return s(n);a.match("unavailable.html").then(e=>t(e))})})})});e.respondWith(t)}),self.addEventListener("message",e=>{"cacheRestaurantSites"===e.data.action&&e.data.restaurants&&e.data.restaurants.length>0&&caches.open(cacheName).then(function(t){let s=[];e.data.restaurants.forEach(e=>{s.push(`restaurant.html?id=${e.id}`)}),t.addAll(s)})});